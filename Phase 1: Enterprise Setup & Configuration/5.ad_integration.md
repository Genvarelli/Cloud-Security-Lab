# 🏢 Active Directory Integration

After configuring the **Domain Controller** with **Active Directory**, **DHCP**, and **DNS**, I joined multiple **Linux** and **Windows** workstations to the domain. Windows 11 Enterprise simulates a realistic workplace setup. In enterprise environments, employees are assigned **Windows workstations** (typically running Enterprise or Pro editions) managed via **Active Directory**.

---
### ⚙️ Installation Process

1. Follow the ISO setup steps in [`general_installation.md`](./1.general_installation.md):
   - Start the VM

2. When the installer reaches the **"Where do you want to install Windows?"** screen:
   - Click **New** to create a partition
   - Click **Apply**
   - Select the **always choose the largest partition**
   - Click **Next** to begin installation
---

### 🚫 Bypass Microsoft Account (Offline Setup)

To prevent online account sign-in and simulate an offline lab environment:

3. In **VirtualBox**, with the VM (`skynet-win-client`):
   - Go to **Machine > Settings > Network**
   - Set **Adapter 1** to `Host-only Adapter`
   - Click **OK**

   → This disables internet access to bypass the Microsoft account requirement.

4. On the **Microsoft account sign-in screen**, press:
   - **Fn + Shift + F10** to launch the **Command Prompt**

   ![Command Prompt](img/commandprompt.png)

5. In the command prompt, run:
   ```bash
   oobe\bypassnro

- Press **Enter**

- The VM will reboot and return to the setup process

---

### 📡 Wi-Fi Setup

- On the **Wi-Fi screen**, select:  
  **“I don’t have internet”**

---

### 👤 Create Local Account

- Enter a username:  `skynet-sec-work` _(This is temporary; it will be joined to the domain later)_

- Set a password and complete the security questions → Use the credentials listed in your [Project Overview](https://github.com/Genvarelli/Threat-Detection-Monitoring-Lab)

---

**🌐 Restore Network Access see & install guest editions for windows 11 vm** [`general_installation.md`](./1.general_installation.md).


✅ **Result**: Windows 11 is installed, Microsoft login is bypassed, and the VM is ready for domain integration.

---

## Configure a Static IP Address

I needed to assign a static IP to the Windows 11 VM so it can communicate reliably with the Domain Controller.

### Steps:

1. Open the **Control Panel**.
2. Navigate to:
  ***Network and Internet > Network and Sharing Center > Change adapter settings***

3. Right-click on the **Ethernet** adapter and select **Properties**.
4. Scroll down and select **Internet Protocol Version 4 (TCP/IPv4)**, then click **Properties**.
5. In the new window:
- Select: **Use the following IP address**
  - **IP address**: `10.0.0.100`
  - **Subnet mask**: `255.255.255.0`
  - **Default gateway**: `10.0.0.1`
- Select: **Use the following DNS server addresses**
  - **Preferred DNS server**: `10.0.0.5` (this is the Domain Controller)
6. Click **OK**, then **Close** to save the settings.

> 💡 **Note**: By manually configuring the DNS server to point to the Domain Controller (`10.0.0.5`), your Windows 11 VM will send DNS queries to the domain controller first. This allows it to resolve domain hostnames locally—ideal for a lab environment. This setup is not typical for production use.

---

## 3. Rename the Computer and Join the Domain

1. Go back to **Control Panel** and search for **"Change workgroup name"**.
2. In the **System Properties** window that appears, click the **Change...** button.
3. In the dialog box:
- Rename the computer to: `skynet-win-client`
- Select: **Member of Domain**
- Enter the domain: `corp.skynet-dc.com`
4. Click **OK**, then confirm and restart the computer if prompted.

> 🔗 Refer to the [Project Overview](https://github.com/Genvarelli/Threat-Detection-Monitoring-Lab) for exact naming conventions and IP address configurations.
